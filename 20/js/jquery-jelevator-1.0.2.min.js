/*!
 jelevator jQuery Plugin
 (c) 2013 www.w3Blender.com
 For any questions and support please visit www.w3blender.com.
 */(function(e){var t=!1,n={settings:null,closeItemsPanel:function(t){if(e(t.target).parents(".jelevator").length>0&&!e(t.currentTarget).hasClass("jelevator-menu"))return!1;e(".jelevator-navi-items").hide();e(".jelevator-navigation").removeClass("open");typeof n.settings.onSectionsMenuClick=="function"&&n.settings.onSectionsMenuClick(t,"hide")},scrollToPosition:function(r){t=!0;if(n.settings.animatedScroll)e("body, html").animate({scrollTop:r},n.settings.animationSpeed,function(){t=!1});else{e(document).scrollTop(r);t=!1}}},r={showTopButton:!0,showBottomButton:!1,showSectionsMenu:!1,onSectionsMenuClick:null,sectionsMenuTitle:"",animatedScroll:!0,animationSpeed:500};e.fn.jElevator=function(i){var s=e.extend(r,i);n.settings=s;var o=e(this),u=0,a=0,f=0;this.init=function(){this.createInDomTree();s.showSectionsMenu&&e(".jelevator-menu").bind("click",this.onShowMenuBtnClick);if(s.showTopButton){e(".jelevator-scroll-top").bind("click",this.onScrollTopBtnClick);e(".jelevator-navi-items").on("click","a",this.onMenuItemClick);e(document).bind("click",n.closeItemsPanel)}s.showBottomButton&&e(".jelevator-scroll-bottom").bind("click",this.onScrollBottomBtnClick);e(document).unbind("scroll").bind("scroll",function(){if(!t){e(".jelevator-scroll-top").removeClass("return-back").attr("title","Scroll to Top");e(".jelevator-scroll-bottom").removeClass("return-back").attr("title","Scroll to Bottom")}});e(document).bind("mousemove",this.onMouseMove)};this.createInDomTree=function(){var t="",n="";s.sectionsMenuTitle!==""&&(n="<li><strong>"+s.sectionsMenuTitle+":</strong></li>");o.each(function(t,r){n+='<li><a href="javascript:;">'+e(r).text()+"</a></li>"});var r="";if(s.showTopButton){!s.showSectionsMenu&&!s.showBottomButton?r=" full-height":s.showSectionsMenu||(r=" half-height");t+='<a href="javascript:;" title="Scroll to Top" class="jelevator-scroll-top'+r+'"><span>&nbsp;</span></a>'}if(s.showSectionsMenu){!s.showTopButton&&!s.showBottomButton&&(r=" full-height");t+='<a href="javascript:;" class="jelevator-menu'+r+'"><span>&nbsp;</span></a>'}if(s.showBottomButton){!s.showTopButton&&!s.showSectionsMenu?r=" full-height":s.showSectionsMenu||(r=" half-height");t+='<a href="javascript:;" class="jelevator-scroll-bottom'+r+'"><span>&nbsp;</span></a>'}var i='<div class="jelevator-navi-items"><ul>'+n+"</ul></div>",u='<div class="jelevator"><div class="jelevator-navigation">'+t+"</div>"+(s.showSectionsMenu?i:"")+"</div>";t!==""&&e("body").append(u)};this.onShowMenuBtnClick=function(t){if(e(".jelevator-navigation").hasClass("open"))n.closeItemsPanel(t);else{e(".jelevator-navigation").addClass("open");e(".jelevator-navi-items").css({left:-1*e(".jelevator-navi-items").width(),display:"block"});e(".jelevator-navi-items").animate({left:0},100,function(){typeof s.onSectionsMenuClick=="function"&&s.onSectionsMenuClick(t,"open")})}return!1};this.onScrollTopBtnClick=function(){var t=e(document).scrollTop(),r=0;if(t===0&&u!==0){r=u;e(".jelevator-scroll-top").removeClass("return-back").attr("title","Scroll to Top")}else if(t>0){u=t;r=0;e(".jelevator-scroll-top").addClass("return-back").attr("title","Return to Previous Position")}n.scrollToPosition(r);return!1};this.onScrollBottomBtnClick=function(){var t=0,r=e(document).scrollTop(),i=e(document).height(),s=i-r-e(window).height()===0;if(s&&a>=0){t=a;e(".jelevator-scroll-bottom").removeClass("return-back").attr("title","Scroll to Bottom")}else{e(".jelevator-scroll-bottom").addClass("return-back").attr("title","Return to Previous Position");a=r;t=i}n.scrollToPosition(t);return!1};this.onMenuItemClick=function(){var t=e(this).index("ul a"),r=e(o.get(t)).position().top;n.scrollToPosition(r);return!1};this.onMouseMove=function(t){t.stopImmediatePropagation();var r=t.clientX>0?t.clientX:1,i=parseInt(100/parseInt(e(document).width()/r,10),10),s=!1;if(Math.abs(i-f)<5)return;e(".jelevator-navigation").hasClass("open")&&r>e(".jelevator").width()&&n.closeItemsPanel(t);if(i>=10&&i<=50){var o=e(".jelevator").width()*i*2.5/100;f>i?s=e(".jelevator").width()-o:s=-o;s=Math.ceil(s);s>0&&(s=0)}else i>50?s=-parseInt(e(".jelevator").width(),10):i>=0&&i<10&&(s=0);if(s!==!1){e(".jelevator").stop();e(".jelevator").animate({left:s},100)}f=i};this.init();return this}})(jQuery);